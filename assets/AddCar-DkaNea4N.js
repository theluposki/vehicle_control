import{_ as F,u as L,i as $,r as d,c as i,a,k as c,v as V,n as m,g as r,F as j,j as G,l as y,m as H,s as w,o as n,p as X,d as W}from"./index-BdliIbcx.js";import{E as B}from"./Emitter-BG7KJySb.js";import{d as Y}from"./databaseLocal-DwJM7NER.js";const s=v=>(X("data-v-5ba454ba"),v=v(),W(),v),ee={class:"page int"},ae={class:"form-control"},oe=s(()=>a("label",{for:"placa",class:"label-required"},"Placa:",-1)),te={key:0,class:"error-message"},le={key:1,class:"error-message"},se={class:"form-control"},ie=s(()=>a("label",{for:"modelo",class:"label-required"},"Modelo:",-1)),ne={key:0,class:"error-message"},de={id:"modelos"},ce=["value"],ue={class:"form-group",id:"segmentacao"},re=s(()=>a("legend",null,"Segmentação",-1)),me={class:"field"},ve=s(()=>a("label",{for:"consumidor",class:"label-radio consumidor"},"Consumidor",-1)),pe={class:"field"},_e=s(()=>a("label",{for:"revenda",class:"label-radio revenda"},"Revenda",-1)),ge={key:0,class:"error-message"},fe={class:"form-group",id:"tipo"},be=s(()=>a("legend",null,"Tipo de serviço",-1)),he={class:"field"},Ve=s(()=>a("label",{for:"tp",class:"label-radio tp"},"Troca de peça",-1)),ye={class:"field"},xe=s(()=>a("label",{for:"sm",class:"label-radio sm"},"Serviço mecânico",-1)),Pe={key:0,class:"error-message"},Ie={class:"form-control"},Ee=s(()=>a("label",{for:"qtdPecas",class:"label-required"},"Quantidade de Peças:",-1)),Se={key:0,class:"error-message"},qe={id:"detailsObservacao"},Te=s(()=>a("summary",null,"Alguma observação sobre o veículo?",-1)),Ae={class:"form-control"},Ce=s(()=>a("label",{for:"observacao",class:"label"},"Observação:",-1)),Ne=s(()=>a("i",{class:"ri-save-3-fill"},null,-1)),x="currentVehicle",we={__name:"AddCar",setup(v){const{push:O}=L();$(()=>{B.emit("add-car"),setTimeout(()=>{B.emit("name-route","finalizar etapa troca de peças")},100),Z()});const k=d(["Argo","Onix","Onix Plus","KA","Mobi"]),e=d({placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}),p=d(!0),_=d(!0),g=d(!0),f=d(!0),b=d(!0),h=d(!0);function P(){if(!e.value.placa){document.getElementById("placa").scrollIntoView({behavior:"smooth"}),_.value=!1;return}_.value=!0;const l=e==null?void 0:e.value.placa.trim(),o=/^[A-Z]{3}\d[A-Z]\d{2}$/,t=/^[A-Z]{3}-\d{4}$/;p.value=o.test(l)||t.test(l),p.value||document.getElementById("placa").scrollIntoView({behavior:"smooth"})}let I,E,S,q;const M=()=>{I&&clearTimeout(I),I=setTimeout(()=>{P(),u()},600)},U=()=>{E&&clearTimeout(E),E=setTimeout(()=>{C(),u()},600)},K=()=>{S&&clearTimeout(S),S=setTimeout(()=>{N(),u()},600)},R=()=>{q&&clearTimeout(q),q=setTimeout(()=>{u()},600)};function C(){const l=e.value.modelo;g.value=!0,(!l||l=="")&&(g.value=!1,document.getElementById("modelo").scrollIntoView({behavior:"smooth"}))}function T(){if(!e.value.segmentacao){document.getElementById("segmentacao").scrollIntoView({behavior:"smooth"}),f.value=!1;return}f.value=!0,u()}function A(){if(!e.value.tipo){document.getElementById("tipo").scrollIntoView({behavior:"smooth"}),b.value=!1;return}b.value=!0,u()}function N(){const l=e.value.qtdPecas;h.value=!0,(!l||l=="")&&(h.value=!1,document.getElementById("qtdPecas").scrollIntoView({behavior:"smooth"}))}const J=()=>{P(),C(),T(),A(),N()},Q=()=>{e.value={placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}},D=()=>{localStorage.removeItem(x)},u=()=>{const l=e.value,o=JSON.stringify(l);localStorage.setItem(x,o)},Z=()=>{if(localStorage.getItem(x)){const l=localStorage.getItem(x),o=JSON.parse(l);e.value=o,e.value.observacao&&(document.querySelector("#detailsObservacao").open=!0)}},z=async()=>{if(!e.value.placa||!e.value.modelo||!e.value.segmentacao||!e.value.tipo||!e.value.qtdPecas){J();return}const l=new Date().toISOString();e.value.date=l,console.log(JSON.stringify(e.value,null,2));const o=await Y.vehicle.add({...e.value});if(console.log("id: ",o),o){w("Registrado com sucesso!","success"),D(),Q(),O("/cars/");return}w("Error ao registrar!","error")};return(l,o)=>(n(),i("main",ee,[a("div",ae,[oe,c(a("input",{type:"text",tabindex:"1",class:m({input:!0,invalid:!p.value||!_.value}),"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.placa=t),id:"placa",maxlength:"7",onKeyup:M,placeholder:"placa do veículo. EX: ABC1D123 ou ABC-1234",onBlur:P},null,34),[[V,e.value.placa]]),p.value?r("",!0):(n(),i("p",te,"Placa inválida!")),_.value?r("",!0):(n(),i("p",le,"Placa é obrigatória!"))]),a("div",se,[ie,c(a("input",{type:"text",list:"modelos",tabindex:"2",class:m({input:!0,invalid:!g.value}),"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.modelo=t),id:"modelo",onKeyup:U,placeholder:"modelo do veículo"},null,34),[[V,e.value.modelo]]),g.value?r("",!0):(n(),i("p",ne,"ops, esqueceu de digitar o modelo!"))]),a("datalist",de,[(n(!0),i(j,null,G(k.value,t=>(n(),i("option",{value:t},null,8,ce))),256))]),a("div",ue,[a("fieldset",{class:m({fieldsetNotSelected:!f.value})},[re,a("div",me,[ve,c(a("input",{type:"radio",onChange:T,tabindex:"3",id:"consumidor",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[2]||(o[2]=t=>e.value.segmentacao=t),value:"consumidor"},null,544),[[y,e.value.segmentacao]])]),a("div",pe,[_e,c(a("input",{type:"radio",onChange:T,tabindex:"4",id:"revenda",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[3]||(o[3]=t=>e.value.segmentacao=t),value:"revenda"},null,544),[[y,e.value.segmentacao]])]),f.value?r("",!0):(n(),i("p",ge,"selecione!"))],2)]),a("div",fe,[a("fieldset",{class:m({fieldsetNotSelected:!b.value})},[be,a("div",he,[Ve,c(a("input",{type:"radio",onChange:A,tabindex:"5",id:"tp",name:"tipo",class:"input-radio","onUpdate:modelValue":o[4]||(o[4]=t=>e.value.tipo=t),value:"TP"},null,544),[[y,e.value.tipo]])]),a("div",ye,[xe,c(a("input",{type:"radio",onChange:A,tabindex:"6",id:"sm",name:"tipo",class:"input-radio","onUpdate:modelValue":o[5]||(o[5]=t=>e.value.tipo=t),value:"SM"},null,544),[[y,e.value.tipo]])]),b.value?r("",!0):(n(),i("p",Pe,"selecione!"))],2)]),a("div",Ie,[Ee,c(a("input",{type:"tel",min:"1",max:"2",maxlength:"2",tabindex:"7",class:m({input:!0,invalid:!h.value}),"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.qtdPecas=t),id:"qtdPecas",placeholder:"Ex: 3",onKeyup:K},null,34),[[V,e.value.qtdPecas,void 0,{number:!0}]]),h.value?r("",!0):(n(),i("p",Se,"ops, esqueceu de digitar a quantidade de peças!"))]),a("details",qe,[Te,a("div",Ae,[Ce,c(a("textarea",{class:"textarea",onKeyup:R,"onUpdate:modelValue":o[7]||(o[7]=t=>e.value.observacao=t),id:"observacao",placeholder:"Ex: veículo com amassado na porta d/d."},null,544),[[V,e.value.observacao]])])]),a("div",{class:"form-control"},[a("button",{class:"btn",onClick:z,tabindex:"8"},[H(" Registrar "),Ne])])]))}},Me=F(we,[["__scopeId","data-v-5ba454ba"]]);export{Me as default};
