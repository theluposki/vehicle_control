import{_ as z,u as L,l as j,m as H,i as X,r as p,c as s,a,q as d,v as C,n as _,g as u,F as W,k as Y,s as c,j as ee,x as M,o as i,p as ae,d as oe}from"./index-DcqA8O08.js";import{E as O}from"./Emitter-BG7KJySb.js";import{d as te}from"./databaseLocal-Dlg8h0gS.js";import{m as le}from"./modelos-C3hdnura.js";const l=g=>(ae("data-v-f9a7d6a5"),g=g(),oe(),g),se={class:"page int"},ie={class:"form-control"},ne=l(()=>a("label",{for:"placa",class:"label-required"},"Placa:",-1)),de={key:0,class:"error-message"},ue={key:1,class:"error-message"},re={class:"form-control"},ce=l(()=>a("label",{for:"modelo",class:"label-required"},"Modelo:",-1)),me={key:0,class:"error-message"},pe={id:"modelos"},ve=["value"],_e={class:"form-group",id:"segmentacao"},ge=l(()=>a("legend",null,"Segmentação",-1)),fe={class:"field"},be=l(()=>a("label",{for:"consumidor",class:"label-radio consumidor"},"Consumidor",-1)),he={class:"field"},Ve=l(()=>a("label",{for:"revenda",class:"label-radio revenda"},"Revenda",-1)),ye={key:0,class:"error-message"},Pe={class:"form-group",id:"tipo"},Ce=l(()=>a("legend",null,"Tipo de serviço",-1)),Ee={key:0,class:"field"},xe=l(()=>a("label",{for:"tp",class:"label-radio tp"},"Troca de peça",-1)),Ae={key:1,class:"field"},Ie=l(()=>a("label",{for:"sm",class:"label-radio sm"},"Serviço mecânico",-1)),Ne={key:2,class:"field"},Se=l(()=>a("label",{for:"montagem",class:"label-radio montagem"},"Montagem",-1)),Te={key:3,class:"field"},ke=l(()=>a("label",{for:"desmontagem",class:"label-radio sm"},"Desmontagem",-1)),qe={key:4,class:"field"},Me=l(()=>a("label",{for:"preparacao",class:"label-radio preparacao"},"Preparação",-1)),Oe={key:5,class:"field"},Ue=l(()=>a("label",{for:"pintura",class:"label-radio sm"},"Pintura",-1)),Re={key:6,class:"field"},we=l(()=>a("label",{for:"pdc_mecanico",class:"label-radio pdc_mecanico"},"PDC Mecânico",-1)),Be={key:7,class:"field"},De=l(()=>a("label",{for:"pdc_conferencia",class:"label-radio sm"},"pdc_conferencia",-1)),Fe={key:8,class:"error-message"},Je={class:"form-control"},Ke=l(()=>a("label",{for:"qtdPecas",class:"label-required"},"Quantidade de Peças:",-1)),Qe={key:0,class:"error-message"},Ge={id:"detailsObservacao"},Ze=l(()=>a("summary",null,"Alguma observação sobre o veículo?",-1)),$e={class:"form-control"},ze=l(()=>a("label",{for:"observacao",class:"label"},"Observação:",-1)),Le=l(()=>a("i",{class:"ri-save-3-fill"},null,-1)),E="currentVehicle",je={__name:"AddCar",setup(g){const{push:U}=L(),R=j(),r=H(()=>R.User);X(()=>{O.emit("add-car"),setTimeout(()=>{O.emit("name-route",`Finalizar - ${r.value.setor}`)},100),Z()});const w=p(le),e=p({placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:"",user:null}),f=p(!0),b=p(!0),h=p(!0),V=p(!0),y=p(!0),P=p(!0);function x(){if(!e.value.placa){document.getElementById("placa").scrollIntoView({behavior:"smooth"}),b.value=!1;return}b.value=!0;const n=e==null?void 0:e.value.placa.trim(),o=/^[A-Z]{3}\d[A-Z]\d{2}$/,t=/^[A-Z]{3}-\d{4}$/;f.value=o.test(n)||t.test(n),f.value||document.getElementById("placa").scrollIntoView({behavior:"smooth"})}let A,I,N,S;const B=()=>{A&&clearTimeout(A),A=setTimeout(()=>{x(),v()},600)},D=()=>{I&&clearTimeout(I),I=setTimeout(()=>{k(),v()},600)},F=()=>{N&&clearTimeout(N),N=setTimeout(()=>{q(),v()},600)},J=()=>{S&&clearTimeout(S),S=setTimeout(()=>{v()},600)};function k(){const n=e.value.modelo;h.value=!0,(!n||n=="")&&(h.value=!1,document.getElementById("modelo").scrollIntoView({behavior:"smooth"}))}function T(){if(!e.value.segmentacao){document.getElementById("segmentacao").scrollIntoView({behavior:"smooth"}),V.value=!1;return}V.value=!0,v()}function m(){if(!e.value.tipo){document.getElementById("tipo").scrollIntoView({behavior:"smooth"}),y.value=!1;return}y.value=!0,v()}function q(){const n=e.value.qtdPecas;P.value=!0,(!n||n=="")&&(P.value=!1,document.getElementById("qtdPecas").scrollIntoView({behavior:"smooth"}))}const K=()=>{x(),k(),T(),m(),q()},Q=()=>{e.value={placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}},G=()=>{localStorage.removeItem(E)},v=()=>{const n=e.value,o=JSON.stringify(n);localStorage.setItem(E,o)},Z=()=>{if(localStorage.getItem(E)){const n=localStorage.getItem(E),o=JSON.parse(n);e.value=o,e.value.observacao&&(document.querySelector("#detailsObservacao").open=!0)}},$=async()=>{if(!e.value.placa||!e.value.modelo||!e.value.segmentacao||!e.value.tipo||!e.value.qtdPecas){K();return}e.value.user=r.value.nome,e.value.matricula=r.value.matricula,e.value.setor=r.value.setor;const n=new Date().toISOString();e.value.date=n,console.log(JSON.stringify(e.value,null,2));const o=await te.vehicle.add({...e.value});if(console.log("id: ",o),o){M("Registrado com sucesso!","success"),G(),Q(),U("/cars/");return}M("Error ao registrar!","error")};return(n,o)=>(i(),s("main",se,[a("div",ie,[ne,d(a("input",{type:"text",tabindex:"1",class:_({input:!0,invalid:!f.value||!b.value}),"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.placa=t),id:"placa",maxlength:"7",onKeyup:B,placeholder:"placa do veículo. EX: ABC1D123 ou ABC-1234",onBlur:x},null,34),[[C,e.value.placa]]),f.value?u("",!0):(i(),s("p",de,"Placa inválida!")),b.value?u("",!0):(i(),s("p",ue,"Placa é obrigatória!"))]),a("div",re,[ce,d(a("input",{type:"text",list:"modelos",tabindex:"2",class:_({input:!0,invalid:!h.value}),"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.modelo=t),id:"modelo",onKeyup:D,placeholder:"modelo do veículo"},null,34),[[C,e.value.modelo]]),h.value?u("",!0):(i(),s("p",me,"ops, esqueceu de digitar o modelo!"))]),a("datalist",pe,[(i(!0),s(W,null,Y(w.value,t=>(i(),s("option",{value:t},null,8,ve))),256))]),a("div",_e,[a("fieldset",{class:_({fieldsetNotSelected:!V.value})},[ge,a("div",fe,[be,d(a("input",{type:"radio",onChange:T,tabindex:"3",id:"consumidor",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[2]||(o[2]=t=>e.value.segmentacao=t),value:"consumidor"},null,544),[[c,e.value.segmentacao]])]),a("div",he,[Ve,d(a("input",{type:"radio",onChange:T,tabindex:"4",id:"revenda",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[3]||(o[3]=t=>e.value.segmentacao=t),value:"revenda"},null,544),[[c,e.value.segmentacao]])]),V.value?u("",!0):(i(),s("p",ye,"selecione!"))],2)]),a("div",Pe,[a("fieldset",{class:_({fieldsetNotSelected:!y.value})},[Ce,r.value.setor=="Troca de Peças"?(i(),s("div",Ee,[xe,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"tp",name:"tipo",class:"input-radio","onUpdate:modelValue":o[4]||(o[4]=t=>e.value.tipo=t),value:"TP"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="Troca de Peças"?(i(),s("div",Ae,[Ie,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"sm",name:"tipo",class:"input-radio","onUpdate:modelValue":o[5]||(o[5]=t=>e.value.tipo=t),value:"SM"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="Montagem/Desmontagem"?(i(),s("div",Ne,[Se,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"montagem",name:"tipo",class:"input-radio","onUpdate:modelValue":o[6]||(o[6]=t=>e.value.tipo=t),value:"MONTAGEM"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="Montagem/Desmontagem"?(i(),s("div",Te,[ke,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"desmontagem",name:"tipo",class:"input-radio","onUpdate:modelValue":o[7]||(o[7]=t=>e.value.tipo=t),value:"DESMONTAGEM"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PREPARAÇÃO/PINTURA"?(i(),s("div",qe,[Me,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"preparacao",name:"tipo",class:"input-radio","onUpdate:modelValue":o[8]||(o[8]=t=>e.value.tipo=t),value:"PREPARACAO"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PREPARAÇÃO/PINTURA"?(i(),s("div",Oe,[Ue,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"pintura",name:"tipo",class:"input-radio","onUpdate:modelValue":o[9]||(o[9]=t=>e.value.tipo=t),value:"PINTURA"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PDC-CONFERENCIA"?(i(),s("div",Re,[we,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"pdc_mecanico",name:"tipo",class:"input-radio","onUpdate:modelValue":o[10]||(o[10]=t=>e.value.tipo=t),value:"PDC_MECANICO"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PDC-CONFERENCIA"?(i(),s("div",Be,[De,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"pdc_conferencia",name:"tipo",class:"input-radio","onUpdate:modelValue":o[11]||(o[11]=t=>e.value.tipo=t),value:"PDC_CONFERENCIA"},null,544),[[c,e.value.tipo]])])):u("",!0),y.value?u("",!0):(i(),s("p",Fe,"selecione!"))],2)]),a("div",Je,[Ke,d(a("input",{type:"tel",min:"1",max:"2",maxlength:"2",tabindex:"7",class:_({input:!0,invalid:!P.value}),"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.qtdPecas=t),id:"qtdPecas",placeholder:"Ex: 3",onKeyup:F},null,34),[[C,e.value.qtdPecas,void 0,{number:!0}]]),P.value?u("",!0):(i(),s("p",Qe,"ops, esqueceu de digitar a quantidade de peças!"))]),a("details",Ge,[Ze,a("div",$e,[ze,d(a("textarea",{class:"textarea",onKeyup:J,"onUpdate:modelValue":o[13]||(o[13]=t=>e.value.observacao=t),id:"observacao",placeholder:"Ex: veículo com amassado na porta d/d."},null,544),[[C,e.value.observacao]])])]),a("div",{class:"form-control"},[a("button",{class:"btn",onClick:$,tabindex:"8"},[ee(" Registrar "),Le])])]))}},ea=z(je,[["__scopeId","data-v-f9a7d6a5"]]);export{ea as default};
