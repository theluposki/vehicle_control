import{_ as Z,i as z,r as i,c as d,a as e,j as n,v as f,n as r,g as b,F as D,k as L,l as h,m as $,o as c,p as j,d as G}from"./index-CrBXVnvU.js";import{E as N}from"./Emitter-BG7KJySb.js";const s=m=>(j("data-v-9e809954"),m=m(),G(),m),H={class:"page int"},X={class:"form-control"},W=s(()=>e("label",{for:"placa",class:"label-required"},"Placa:",-1)),Y={key:0,class:"error-message"},ee={key:1,class:"error-message"},ae={class:"form-control"},oe=s(()=>e("label",{for:"modelo",class:"label-required"},"Modelo:",-1)),le={key:0,class:"error-message"},te={id:"modelos"},se=["value"],ie={class:"form-group",id:"segmentacao"},ne=s(()=>e("legend",null,"Segmentação",-1)),de={class:"field"},ce=s(()=>e("label",{for:"consumidor",class:"label-radio consumidor"},"Consumidor",-1)),ue={class:"field"},re=s(()=>e("label",{for:"revenda",class:"label-radio revenda"},"Revenda",-1)),me={class:"form-group",id:"tipo"},ve=s(()=>e("legend",null,"Tipo de serviço",-1)),pe={class:"field"},_e=s(()=>e("label",{for:"tp",class:"label-radio tp"},"Troca de peça",-1)),ge={class:"field"},fe=s(()=>e("label",{for:"sm",class:"label-radio sm"},"Serviço mecânico",-1)),be={class:"form-control"},he=s(()=>e("label",{for:"qtdPecas",class:"label-required"},"Quantidade de Peças:",-1)),Ve={key:0,class:"error-message"},ye={id:"detailsObservacao"},xe=s(()=>e("summary",null,"Alguma observação sobre o veículo?",-1)),Pe={class:"form-control"},Ie=s(()=>e("label",{for:"observacao",class:"label"},"Observação:",-1)),Ee=s(()=>e("i",{class:"ri-save-3-fill"},null,-1)),V="currentVehicle",qe={__name:"AddCar",setup(m){z(()=>{N.emit("add-car"),setTimeout(()=>{N.emit("name-route","Finalizar etapa troca de peças")},100),R()});const M=i(["Argo","Onix","Onix Plus","KA","Mobi"]),a=i({placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}),v=i(!0),p=i(!0),_=i(!0),y=i(!0),x=i(!0),g=i(!0);function P(){if(!a.value.placa){document.getElementById("placa").scrollIntoView({behavior:"smooth"}),p.value=!1;return}p.value=!0;const t=a==null?void 0:a.value.placa.trim(),o=/^[A-Z]{3}\d[A-Z]\d{2}$/,l=/^[A-Z]{3}-\d{4}$/;v.value=o.test(t)||l.test(t),v.value||document.getElementById("placa").scrollIntoView({behavior:"smooth"})}let I,E,q,S;const O=()=>{I&&clearTimeout(I),I=setTimeout(()=>{P(),u()},600)},k=()=>{E&&clearTimeout(E),E=setTimeout(()=>{C(),u()},600)},w=()=>{q&&clearTimeout(q),q=setTimeout(()=>{B(),u()},600)},U=()=>{S&&clearTimeout(S),S=setTimeout(()=>{u()},600)};function C(){const t=a.value.modelo;_.value=!0,(!t||t=="")&&(_.value=!1,document.getElementById("modelo").scrollIntoView({behavior:"smooth"}))}function T(){if(!a.value.segmentacao){document.getElementById("segmentacao").scrollIntoView({behavior:"smooth"}),y.value=!1;return}y.value=!0,u()}function A(){if(!a.value.tipo){document.getElementById("tipo").scrollIntoView({behavior:"smooth"}),x.value=!1;return}x.value=!0,u()}function B(){const t=a.value.qtdPecas;g.value=!0,(!t||t=="")&&(g.value=!1,document.getElementById("qtdPecas").scrollIntoView({behavior:"smooth"}))}const K=()=>{P(),C(),T(),A(),B()},J=()=>{a.value={placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}},Q=()=>{localStorage.removeItem(V)},u=()=>{const t=a.value,o=JSON.stringify(t);localStorage.setItem(V,o)},R=()=>{if(localStorage.getItem(V)){const t=localStorage.getItem(V),o=JSON.parse(t);a.value=o,a.value.observacao&&(document.querySelector("#detailsObservacao").open=!0)}},F=()=>{if(!a.value.placa||!a.value.modelo||!a.value.segmentacao||!a.value.tipo||!a.value.qtdPecas){K();return}console.log("registrado"),Q(),J()};return(t,o)=>(c(),d("main",H,[e("div",X,[W,n(e("input",{type:"text",tabindex:"1",class:r({input:!0,invalid:!v.value||!p.value}),"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.placa=l),id:"placa",maxlength:"7",onKeyup:O,placeholder:"placa do veículo. EX: ABC1D123 ou ABC-1234",onBlur:P},null,34),[[f,a.value.placa]]),v.value?b("",!0):(c(),d("p",Y,"Placa inválida!")),p.value?b("",!0):(c(),d("p",ee,"Placa é obrigatória!"))]),e("div",ae,[oe,n(e("input",{type:"text",list:"modelos",tabindex:"2",class:r({input:!0,invalid:!_.value}),"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.modelo=l),id:"modelo",onKeyup:k,placeholder:"modelo do veículo"},null,34),[[f,a.value.modelo]]),_.value?b("",!0):(c(),d("p",le,"ops, esqueceu de digitar o modelo!"))]),e("datalist",te,[(c(!0),d(D,null,L(M.value,l=>(c(),d("option",{value:l},null,8,se))),256))]),e("div",ie,[e("fieldset",{class:r({fieldsetNotSelected:!y.value})},[ne,e("div",de,[ce,n(e("input",{type:"radio",onChange:T,tabindex:"3",id:"consumidor",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[2]||(o[2]=l=>a.value.segmentacao=l),value:"consumidor"},null,544),[[h,a.value.segmentacao]])]),e("div",ue,[re,n(e("input",{type:"radio",onChange:T,tabindex:"4",id:"revenda",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[3]||(o[3]=l=>a.value.segmentacao=l),value:"revenda"},null,544),[[h,a.value.segmentacao]])])],2)]),e("div",me,[e("fieldset",{class:r({fieldsetNotSelected:!x.value})},[ve,e("div",pe,[_e,n(e("input",{type:"radio",onChange:A,tabindex:"5",id:"tp",name:"tipo",class:"input-radio","onUpdate:modelValue":o[4]||(o[4]=l=>a.value.tipo=l),value:"TP"},null,544),[[h,a.value.tipo]])]),e("div",ge,[fe,n(e("input",{type:"radio",onChange:A,tabindex:"6",id:"sm",name:"tipo",class:"input-radio","onUpdate:modelValue":o[5]||(o[5]=l=>a.value.tipo=l),value:"SM"},null,544),[[h,a.value.tipo]])])],2)]),e("div",be,[he,n(e("input",{type:"tel",min:"1",max:"2",maxlength:"2",tabindex:"7",class:r({input:!0,invalid:!g.value}),"onUpdate:modelValue":o[6]||(o[6]=l=>a.value.qtdPecas=l),id:"qtdPecas",placeholder:"Ex: 3",onKeyup:w},null,34),[[f,a.value.qtdPecas,void 0,{number:!0}]]),g.value?b("",!0):(c(),d("p",Ve,"ops, esqueceu de digitar a quantidade de peças!"))]),e("details",ye,[xe,e("div",Pe,[Ie,n(e("textarea",{class:"textarea",onKeyup:U,"onUpdate:modelValue":o[7]||(o[7]=l=>a.value.observacao=l),id:"observacao",placeholder:"Ex: veículo com amassado na porta d/d."},null,544),[[f,a.value.observacao]])])]),e("div",{class:"form-control"},[e("button",{class:"btn",onClick:F,tabindex:"8"},[$(" Registrar "),Ee])])]))}},Ae=Z(qe,[["__scopeId","data-v-9e809954"]]);export{Ae as default};
