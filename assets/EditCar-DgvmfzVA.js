import{_ as L,u as X,y as H,l as J,m as W,i as Y,r as p,c as s,a,q as d,v as V,n as v,g as u,F as ee,k as ae,s as c,j as O,x as q,o as i,p as oe,d as te}from"./index-DcqA8O08.js";import{E as S}from"./Emitter-BG7KJySb.js";import{d as k}from"./databaseLocal-Dlg8h0gS.js";import{m as le}from"./modelos-C3hdnura.js";const l=_=>(oe("data-v-775b3781"),_=_(),te(),_),se={class:"page int"},ie={class:"form-control"},ne=l(()=>a("label",{for:"placa",class:"label-required"},"Placa:",-1)),de={key:0,class:"error-message"},ue={key:1,class:"error-message"},re={class:"form-control"},ce=l(()=>a("label",{for:"modelo",class:"label-required"},"Modelo:",-1)),me={key:0,class:"error-message"},pe={id:"modelos"},ve=["value"],_e={class:"form-group",id:"segmentacao"},be=l(()=>a("legend",null,"Segmentação",-1)),fe={class:"field"},ge=l(()=>a("label",{for:"consumidor",class:"label-radio consumidor"},"Consumidor",-1)),he={class:"field"},ye=l(()=>a("label",{for:"revenda",class:"label-radio revenda"},"Revenda",-1)),Pe={key:0,class:"error-message"},Ve={class:"form-group",id:"tipo"},Ee=l(()=>a("legend",null,"Tipo de serviço",-1)),Ce={key:0,class:"field"},xe=l(()=>a("label",{for:"tp",class:"label-radio tp"},"Troca de peça",-1)),Ne={key:1,class:"field"},Ae=l(()=>a("label",{for:"sm",class:"label-radio sm"},"Serviço mecânico",-1)),Ie={key:2,class:"field"},Te=l(()=>a("label",{for:"montagem",class:"label-radio montagem"},"Montagem",-1)),qe={key:3,class:"field"},ke=l(()=>a("label",{for:"desmontagem",class:"label-radio sm"},"Desmontagem",-1)),Me={key:4,class:"field"},Ue=l(()=>a("label",{for:"preparacao",class:"label-radio preparacao"},"Preparação",-1)),Re={key:5,class:"field"},De=l(()=>a("label",{for:"pintura",class:"label-radio sm"},"Pintura",-1)),Oe={key:6,class:"field"},Se=l(()=>a("label",{for:"pdc_mecanico",class:"label-radio pdc_mecanico"},"PDC Mecânico",-1)),we={key:7,class:"field"},Be=l(()=>a("label",{for:"pdc_conferencia",class:"label-radio sm"},"pdc_conferencia",-1)),Fe={key:8,class:"error-message"},Ke={class:"form-control"},Qe=l(()=>a("label",{for:"qtdPecas",class:"label-required"},"Quantidade de Peças:",-1)),Ze={key:0,class:"error-message"},$e={id:"detailsObservacao"},ze=l(()=>a("summary",null,"Alguma observação sobre o veículo?",-1)),Ge={class:"form-control"},je=l(()=>a("label",{for:"observacao",class:"label"},"Observação:",-1)),Le=l(()=>a("i",{class:"ri-delete-bin-6-line"},null,-1)),Xe=l(()=>a("i",{class:"ri-save-3-fill"},null,-1)),He={__name:"EditCar",setup(_){const{push:M}=X(),{params:E}=H(),w=J(),r=W(()=>w.User);Y(()=>{S.emit("add-car"),setTimeout(()=>{S.emit("name-route",`Editar - ${r.value.setor}`)},100),z(E.id)});const B=p(le),e=p({placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}),b=p(!0),f=p(!0),g=p(!0),h=p(!0),y=p(!0),P=p(!0);function C(){if(!e.value.placa){document.getElementById("placa").scrollIntoView({behavior:"smooth"}),f.value=!1;return}f.value=!0;const n=e==null?void 0:e.value.placa.trim(),o=/^[A-Z]{3}\d[A-Z]\d{2}$/,t=/^[A-Z]{3}-\d{4}$/;b.value=o.test(n)||t.test(n),b.value||document.getElementById("placa").scrollIntoView({behavior:"smooth"})}let x,N,A,I;const F=()=>{x&&clearTimeout(x),x=setTimeout(()=>{C()},600)},K=()=>{N&&clearTimeout(N),N=setTimeout(()=>{U()},600)},Q=()=>{A&&clearTimeout(A),A=setTimeout(()=>{R()},600)},Z=()=>{I&&clearTimeout(I),I=setTimeout(()=>{},600)};function U(){const n=e.value.modelo;g.value=!0,(!n||n=="")&&(g.value=!1,document.getElementById("modelo").scrollIntoView({behavior:"smooth"}))}function T(){if(!e.value.segmentacao){document.getElementById("segmentacao").scrollIntoView({behavior:"smooth"}),h.value=!1;return}h.value=!0}function m(){if(!e.value.tipo){document.getElementById("tipo").scrollIntoView({behavior:"smooth"}),y.value=!1;return}y.value=!0}function R(){const n=e.value.qtdPecas;P.value=!0,(!n||n=="")&&(P.value=!1,document.getElementById("qtdPecas").scrollIntoView({behavior:"smooth"}))}const $=()=>{C(),U(),T(),m(),R()},D=()=>{e.value={placa:null,modelo:null,segmentacao:null,tipo:null,qtdPecas:null,observacao:""}},z=async n=>{if(!n)return;const o=await k.vehicle.get(Number(n));e.value=o,e.value.observacao&&(document.querySelector("#detailsObservacao").open=!0)},G=async()=>{if(!e.value.placa||!e.value.modelo||!e.value.segmentacao||!e.value.tipo||!e.value.qtdPecas){$();return}e.value.user=r.value.nome,e.value.matricula=r.value.matricula,e.value.setor=r.value.setor;const n=new Date().toISOString();if(e.value.updateAt=n,await k.vehicle.update(Number(E.id),{...e.value})){q("Editado com sucesso!","success"),D(),M("/cars/");return}q("Error ao editar!","error")},j=async()=>{confirm("Tem certeza que quer deletar esse registro?")&&(await k.vehicle.delete(Number(E.id)),D(),M("/cars/"),q("deletado com sucesso!","alert"))};return(n,o)=>(i(),s("main",se,[a("div",ie,[ne,d(a("input",{type:"text",tabindex:"1",class:v({input:!0,invalid:!b.value||!f.value}),"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.placa=t),id:"placa",maxlength:"7",onKeyup:F,placeholder:"placa do veículo. EX: ABC1D123 ou ABC-1234",onBlur:C},null,34),[[V,e.value.placa]]),b.value?u("",!0):(i(),s("p",de,"Placa inválida!")),f.value?u("",!0):(i(),s("p",ue,"Placa é obrigatória!"))]),a("div",re,[ce,d(a("input",{type:"text",list:"modelos",tabindex:"2",class:v({input:!0,invalid:!g.value}),"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.modelo=t),id:"modelo",onKeyup:K,placeholder:"modelo do veículo"},null,34),[[V,e.value.modelo]]),g.value?u("",!0):(i(),s("p",me,"ops, esqueceu de digitar o modelo!"))]),a("datalist",pe,[(i(!0),s(ee,null,ae(B.value,t=>(i(),s("option",{value:t},null,8,ve))),256))]),a("div",_e,[a("fieldset",{class:v({fieldsetNotSelected:!h.value})},[be,a("div",fe,[ge,d(a("input",{type:"radio",onChange:T,tabindex:"3",id:"consumidor",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[2]||(o[2]=t=>e.value.segmentacao=t),value:"consumidor"},null,544),[[c,e.value.segmentacao]])]),a("div",he,[ye,d(a("input",{type:"radio",onChange:T,tabindex:"4",id:"revenda",name:"segmentacao",class:"input-radio","onUpdate:modelValue":o[3]||(o[3]=t=>e.value.segmentacao=t),value:"revenda"},null,544),[[c,e.value.segmentacao]])]),h.value?u("",!0):(i(),s("p",Pe,"selecione!"))],2)]),a("div",Ve,[a("fieldset",{class:v({fieldsetNotSelected:!y.value})},[Ee,r.value.setor=="Troca de Peças"?(i(),s("div",Ce,[xe,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"tp",name:"tipo",class:"input-radio","onUpdate:modelValue":o[4]||(o[4]=t=>e.value.tipo=t),value:"TP"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="Troca de Peças"?(i(),s("div",Ne,[Ae,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"sm",name:"tipo",class:"input-radio","onUpdate:modelValue":o[5]||(o[5]=t=>e.value.tipo=t),value:"SM"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="Montagem/Desmontagem"?(i(),s("div",Ie,[Te,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"montagem",name:"tipo",class:"input-radio","onUpdate:modelValue":o[6]||(o[6]=t=>e.value.tipo=t),value:"MONTAGEM"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="Montagem/Desmontagem"?(i(),s("div",qe,[ke,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"desmontagem",name:"tipo",class:"input-radio","onUpdate:modelValue":o[7]||(o[7]=t=>e.value.tipo=t),value:"DESMONTAGEM"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PREPARAÇÃO/PINTURA"?(i(),s("div",Me,[Ue,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"preparacao",name:"tipo",class:"input-radio","onUpdate:modelValue":o[8]||(o[8]=t=>e.value.tipo=t),value:"PREPARACAO"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PREPARAÇÃO/PINTURA"?(i(),s("div",Re,[De,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"pintura",name:"tipo",class:"input-radio","onUpdate:modelValue":o[9]||(o[9]=t=>e.value.tipo=t),value:"PINTURA"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PDC-CONFERENCIA"?(i(),s("div",Oe,[Se,d(a("input",{type:"radio",onChange:m,tabindex:"5",id:"pdc_mecanico",name:"tipo",class:"input-radio","onUpdate:modelValue":o[10]||(o[10]=t=>e.value.tipo=t),value:"PDC_MECANICO"},null,544),[[c,e.value.tipo]])])):u("",!0),r.value.setor=="PDC-CONFERENCIA"?(i(),s("div",we,[Be,d(a("input",{type:"radio",onChange:m,tabindex:"6",id:"pdc_conferencia",name:"tipo",class:"input-radio","onUpdate:modelValue":o[11]||(o[11]=t=>e.value.tipo=t),value:"PDC_CONFERENCIA"},null,544),[[c,e.value.tipo]])])):u("",!0),y.value?u("",!0):(i(),s("p",Fe,"selecione!"))],2)]),a("div",Ke,[Qe,d(a("input",{type:"tel",min:"1",max:"2",maxlength:"2",tabindex:"7",class:v({input:!0,invalid:!P.value}),"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.qtdPecas=t),id:"qtdPecas",placeholder:"Ex: 3",onKeyup:Q},null,34),[[V,e.value.qtdPecas,void 0,{number:!0}]]),P.value?u("",!0):(i(),s("p",Ze,"ops, esqueceu de digitar a quantidade de peças!"))]),a("details",$e,[ze,a("div",Ge,[je,d(a("textarea",{class:"textarea",onKeyup:Z,"onUpdate:modelValue":o[13]||(o[13]=t=>e.value.observacao=t),id:"observacao",placeholder:"Ex: veículo com amassado na porta d/d."},null,544),[[V,e.value.observacao]])])]),a("div",{class:"form-group"},[a("button",{class:"btn danger",onClick:j,tabindex:"8"},[O(" deletar "),Le]),a("button",{class:"btn alert",onClick:G,tabindex:"8"},[O(" Registrar "),Xe])])]))}},aa=L(He,[["__scopeId","data-v-775b3781"]]);export{aa as default};
